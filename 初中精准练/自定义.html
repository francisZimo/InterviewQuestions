<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="https://static.speiyou.com/qsTemplate/talqsTemplate.min.css" />
    <script src="https://static.speiyou.com/qsTemplate/talqsTemplate.min.js"></script>
    <title>Document</title>
    <style>
      * {
        user-select: none;
      }
      .button {
        color: #666;
        background-color: #eee;
        border-color: #eee;
        font-weight: 300;
        font-size: 16px;
        font-family: "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
        text-decoration: none;
        text-align: center;
        line-height: 40px;
        height: 40px;
        padding: 0 40px;
        margin: 0;
        display: inline-block;
        appearance: none;
        cursor: pointer;
        border: none;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        box-sizing: border-box;
        -webkit-transition-property: all;
        transition-property: all;
        -webkit-transition-duration: 0.3s;
        transition-duration: 0.3s;
      }
      .button:visited {
        color: #666;
      }
      .button:hover,
      .button:focus {
        background-color: #f6f6f6;
        text-decoration: none;
        outline: none;
      }
      .button:active,
      .button.active,
      .button.is-active {
        text-shadow: 0 1px 0 rgba(255, 255, 255, 0.3);
        text-decoration: none;
        background-color: #eeeeee;
        border-color: #cfcfcf;
        color: #d4d4d4;
        -webkit-transition-duration: 0s;
        transition-duration: 0s;
        -webkit-box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
        box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
      }
      .button.disabled,
      .button.is-disabled,
      .button:disabled {
        top: 0 !important;
        background: #eee !important;
        border: 1px solid #ddd !important;
        text-shadow: 0 1px 1px white !important;
        color: #ccc !important;
        cursor: default !important;
        appearance: none !important;
        -webkit-box-shadow: none !important;
        box-shadow: none !important;
        opacity: 0.8 !important;
      }

      .button-pill {
        border-radius: 200px;
      }
    </style>

    <style>
      .talqs_options_columns_item {
        display: block;
        border: 1px solid red;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <a onclick="changeQS('pre')" class="button button-pill">上一题</a>
    <a onclick="changeQS('next')" class="button button-pill">下一题</a>
    <p id="logicName"></p>
    <div id="app"></div>
  </body>
  <!-- <script src="https://static.speiyou.com/showPic/template-demo-data/getQuestionData.js"></script>
    -->
  <script src="./remote.js"></script>
  <script id="questionLabel" type="text/html">
    <div class="talqs_keyword clearfix">
      <label class="talqs_label">标签</label>
      <div class="talqs_panel">{{data.keyWord.split(';zk;').join(' ')}}</div>
    </div>
  </script>
  <script>
    // 获取 dom 根节点
    var app = document.getElementById("app");

    // 试题机构组件模板
    const questionOrganization = `
  <div class="talqs_organization clearfix">
      <label class="talqs_label">机构</label>
      <div class="talqs_panel">                   {{data.systemName}}</div>
  </div>
`;

    // 试题答案组件模板
    const questionAnswer = `
  <div class="talqs_organization clearfix">
      <label class="talqs_label">answer</label>
      <div class="talqs_panel">我是被覆盖的</div>
  </div>
`;
    // 内置组件列表
    const talComponents = TalqsTemplate.components;
    setTimeout(() => {
      console.log("TalqsTemplate", TalqsTemplate);
      TalqsTemplate.updateTemplateList({
        [talComponents.AnalyzeWrapper]: {
          exclude: [talComponents.QueID], // 移除
          components: [
            {
              // 添加到指定位置，第 4 个呈现
              name: "questionOrganization",
              template: questionOrganization,
              index: 3
            },
            {
              // 覆盖内置的答案模板
              name: talComponents.Answer,
              template: questionAnswer
            }
          ]
        }
      });
      app.innerHTML = TalqsTemplate.render(queDataList[currentIndex], {
        queIndex: currentIndex, // 试题题号
        analyzeVersion: 2 // 解析显示版本
      });
      TalqsTemplate.autoLayout();
    }, 3000);
    // TalqsTemplate.updateTemplateList({
    //   [talComponents.AnalyzeWrapper]: {
    //     exclude: [talComponents.QueID], // 移除
    //     components: [
    //       {
    //         // 添加到指定位置，第 4 个呈现
    //         name: "questionOrganization",
    //         template: questionOrganization,
    //         index: 3
    //       },
    //       {
    //         // 覆盖内置的答案模板
    //         name: talComponents.Answer,
    //         template: questionAnswer
    //       }
    //     ]
    //   }
    // });

    // 渲染试题
    var renderQS = function renderQS(queData) {
      app.innerHTML = TalqsTemplate.render(queData, {
        queIndex: currentIndex + 1, // 试题题号
        analyzeVersion: 2 // 解析显示版本
      });
      TalqsTemplate.autoLayout();
    };
  </script>
</html>
