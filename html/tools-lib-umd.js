!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).xyTools={})}(this,(function(e){"use strict";function t(e,t){void 0===t&&(t=Number(2..toFixed(2)));var n="orientationchange"in window?"orientationchange":"resize",o=Number((16/9).toFixed(2)),i=document.documentElement;function r(){if(e&&i){var n,r,a=i.clientWidth,c=i.clientHeight;a/c>t?(r=c,n=c*o):(n=a,r=a/o),e.style.width="".concat(n,"px"),e.style.height="".concat(r,"px")}}return r(),window.addEventListener(n,r,!1),function(){window.removeEventListener(n,r)}}function n(e){var t="orientationchange"in window?"orientationchange":"resize",n=Number((16.5/9).toFixed(2)),o=Number((4/3).toFixed(2)),i=document.documentElement;function r(){if(e&&i){var t,r=i.clientWidth,a=i.clientHeight,c=(t=r/a>n?a*n:r)/o;e.style.width="".concat(t,"px"),e.style.height="".concat(c,"px")}}return r(),window.addEventListener(t,r,!1),function(){window.removeEventListener(t,r)}}function o(e,t,n){void 0===n&&(n="online");for(var o=e.assets.length,i=Object.keys(t).length,r=0,a=0;a<o&&r<i;a++){var c=e.assets[a],u=t[c.id];u&&("online"===n&&(c.p="",c.u=u,r++),"local"===n&&(c.p=u,r++))}return e}function i(e,t){var n=JSON.stringify(e);return n=n.replace(/\*\{(.+?)\}/g,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=e[1];return t[o]?t[o]:e[1]})),JSON.parse(n)}function r(e,t){void 0===e&&(e=667),void 0===t&&(t=375);var n="orientationchange"in window?"orientationchange":"resize",o=e/t,i=t/e,r=document.documentElement;function a(){if(r){var e,n=r.clientWidth,a=r.clientHeight;e=n/a<o?n*i:a,r.style.fontSize="".concat(e/t*100,"px")}}return a(),window.addEventListener(n,a,!1),function(){window.removeEventListener(n,a,!1)}}var a=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=""),console.log("postMessage:",{type:e,data:t}),window.receiveFromCourseware&&window.receiveFromCourseware({type:e,data:t,page:n})},c={loadComplete:function(e){return void 0===e&&(e={}),a("loadComplete",e)},closeWebview:function(e){return void 0===e&&(e={}),a("closeWebview",e)},hideBack:function(){return a("hideBack",{hidden:!0})},hideRefresh:function(){return a("hideRefresh",{hidden:!0})},postMessage:a},u=function(e,t){void 0===t&&(t={}),console.log("postMessage:",{type:e,data:t}),window.WXJsBridge&&window.WXJsBridge.default.postMessage({type:e,data:t})},l={loadComplete:function(e){return void 0===e&&(e={}),u("loadComplete",e)},closeWebview:function(e){return void 0===e&&(e={}),u("closeWebview",e)},hideBack:function(){return u("hideBack",{hidden:!0})},hideRefresh:function(){return u("hideRefresh",{hidden:!0})},postMessage:u},s=function(){var e={},t=document.cookie;if(!t)return e;for(var n=t.split("; "),o=n.length,i=0;i<o;i++){var r=n[i].split("=");e[r[0]]=r[1]}return e},d=function(){var e=window.location.href,t={};return e.replace(/([^?#=&]+)=([^?#=&]+)/g,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t[e[1]]=e[2]})),e.replace(/#([^?#=&]+)/g,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.HASH=e[1]})),t},f=function(){return f=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},f.apply(this,arguments)};function v(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{u(o.next(e))}catch(e){r(e)}}function c(e){try{u(o.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}u((o=o.apply(e,t||[])).next())}))}function p(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}}var h=function(e){void 0===e&&(e="all");var t=d();if("url"===e)return t;var n=s();return"cookie"===e?n:f(f({},n),t)},m=function(e){var t;return void 0===e&&(e=1e3),new Promise((function(n){t=window.setTimeout((function(){clearTimeout(t),n(!0)}),e)}))},g=function(e,t,n,o){void 0===t&&(t=3),void 0===n&&(n=8e3),void 0===o&&(o=500);var i=!1,r={data:{stat:0,data:{}}},a=!1;return new Promise((function(c){return v(void 0,void 0,void 0,(function(){var u,l,s;return p(this,(function(d){switch(d.label){case 0:u=setTimeout((function(){clearTimeout(u),a=!0,c({isError:!0,res:r,msg:"请求超时"})}),n),l=0,d.label=1;case 1:return l<t?l?[4,m(o)]:[3,3]:[3,6];case 2:d.sent(),d.label=3;case 3:return[4,e()];case 4:if(r=d.sent(),a)return[2];if(null===(s=null==r?void 0:r.data)||void 0===s?void 0:s.stat)return clearTimeout(u),c({isError:i,res:r}),[2];i=!0,d.label=5;case 5:return l++,[3,1];case 6:return c({isError:i,res:r}),[2]}}))}))}))},w=function(e,t){if(!e||!t)return!1;var n=e.split("."),o=t.split(".");return 3===n.length&&3===o.length||console.log("请输入标准版本号xx.xx.xx"),!(Number(n[0])<Number(o[0]))&&(!(Number(n[1])<Number(o[1]))&&!(Number(n[2])<Number(o[2])))},b={lottie169Adaptation:t,lottie43Adaptation169:n,lottieReplaceImg:o,lottieReplaceText:i,pageRem:r,getCookieParams:s,getUrlParams:d,getParams:h,sleepDelay:m,requestRetry:g,checkVersion:w,communicationSingle:c,communicationJsBridge:l};e.checkVersion=w,e.communicationJsBridge=l,e.communicationSingle=c,e.default=b,e.getCookieParams=s,e.getParams=h,e.getUrlParams=d,e.lottie169Adaptation=t,e.lottie43Adaptation169=n,e.lottieReplaceImg=o,e.lottieReplaceText=i,e.pageRem=r,e.requestRetry=g,e.sleepDelay=m,Object.defineProperty(e,"__esModule",{value:!0})}));
