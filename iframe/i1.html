<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
  <style>
    html,
    body {
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<body>
  æˆ‘æ˜¯ 1.html, ä¸‹é¢åµŒå¥— 2.html
  <!-- <iframe
        src="https://xueyan.xueersi.com/chess-base-topic/index.html"
        name="child"
      ></iframe> -->
  <!-- <iframe style="width: 100%; height: 100%;" src="https://xueyan.xueersi.com/four-ci-yuan/index.html#/" name="child"></iframe> -->
  <iframe style="width: 100%; height: 100%;" src="http://localhost:80/" name="child"></iframe>
  <!-- <iframe
      style="width: 100%; height: 100%;"
      src="./i2.html"
      name="child" -->
  ></iframe>
  <script>
    function hello() {
      console.log('this is 1.html');
    }

    var iframe = document.getElementsByTagName('iframe')[0];
    // console.log('contentWindow ğŸ¥', iframe.contentWindow); // èƒ½è®¿é—®
    // console.log('contentDocument ğŸ¥', iframe.contentDocument); // èƒ½è®¿é—®

    // æ³¨æ„è®¿é—®æ–¹å¼, éœ€è¦åœ¨ onload åæ‰èƒ½å–åˆ°å€¼
    // console.log( iframe.contentWindow.hello() ) // Uncaught TypeError: iframe.contentWindow.hello is not a function

    iframe.onload = function () {
      console.log('121åŠ è½½æˆåŠŸ')
      // console.log(iframe.contentWindow.hello(), '==hello'); // this is 2.html //  è¾“å‡º Location å¯¹è±¡ï¼Œ ä¾ç„¶è¦åœ¨ iframe.onload ä¸­è®¿é—®
      // console.log(
      //   'contentWindow.location ğŸ¥',
      //   iframe.contentWindow.location
      // ); //  iframe.contentWindow.location.host : 127.0.0.1:8000 //  xxx.hash: Â  Â  "" //  xxx.host: Â  Â  "127.0.0.1:8000" //  xxx.hostname: "127.0.0.1" //  xxx.href: Â  Â  "http://127.0.0.1:8000/2.html" //  xxx.origin: Â  "http://127.0.0.1:8000" //  xxx.pathname: "/2.html" //  xxx.port: Â  Â  "8000" //  xxx.protocol: "http:" //  ... // æœ‰ç›¸åŒçš„æº æˆ‘ä»¬å¯ä»¥è¿›è¡Œä»»ä½•æ“ä½œ
      // iframe.contentDocument.body.innerHTML = '<p>hi, i am ur father !</p>';
      // console.log(iframe.contentDocument.getElementsByTagName('p'), '==p');

      // // onloadå‘é€æ¶ˆæ¯
      let childFrame = window.frames.child;
      // console.log(window.frames, '==framesList', window.frames.child);
      // childFrame.postMessage('i am father');
      // iframe.contentWindow.postMessage(
      //   {
      //   type: 'formData',
      //   data: {
      //     name: 'tom',
      //     age: 12,
      //   },
      // })
      // childFrame.postMessage('ç¬¬ä¸€æ¬¡å‘é€')
      console.log('hhaha9999')

    };

    // iframe.contentWindow.location = 'http://www.360doc.com'; // å¯ä»¥ç›´æ¥ä¿®æ”¹ iframe åœ°å€, ä¸å—åŒæºç­–ç•¥çš„é™åˆ¶ã€‚ æœ‰çš„ç½‘ç«™ä¸æ”¯æŒè¢«iframeå¼•ç”¨, æ‰€ä»¥ä¼šæŠ¥é”™ã€‚ æ³¨æ„åŒºåˆ†é”™è¯¯ä¿¡æ¯ã€‚
    // onloadå‘é€æ¶ˆæ¯
    // let childFrame = window.frames.child;
    // console.log(window.frames, '==framesList', window.frames.child);
    // childFrame.postMessage('ç¬¬ä¸€æ¬¡å‘é€', 'http://127.0.0.1:80');

    window.addEventListener('message', function (event) {

      // if (event.origin !== 'http://127.0.0.1:8000') {
      //   // æ¥è‡ªæœªçŸ¥çš„æºçš„å†…å®¹ï¼Œæˆ‘ä»¬å¿½ç•¥å®ƒ
      //   return;
      // }
      // if (window === event.source) {
      //   return;
      // }
      console.log('received:', event.data);
      //           {
      //     typeï¼š"formData",
      //     dataï¼š{æŠ€æœ¯æ–‡æ¡£ä¸­å®šä¹‰çš„æ•°æ®æ ¼å¼}
      // }
      // å¯ä»¥ä½¿ç”¨ event.source.postMessage(...) å‘å›å‘é€æ¶ˆæ¯
      // return;
      event.source.postMessage({
        type: 'formData',
        data: {
          partName: 'æˆ‘æ˜¯æ–°çš„ç¯èŠ‚',
          clientConfig: {
            "studentHotArea": {
              "count": 6,
              "operationType": "Single",
              "location": [{
                  "id": "b2a74441-09cc-4274-96bf-3a648b74bd7c",
                  "index": 1,
                  "name": "å­¦ç”Ÿçƒ­åŒº_1",
                  "hotAreaType": "student",
                  "interactionType": "video",
                  "role": "",
                  "aiSticker": "desertTheme"
                },
                {
                  "id": "dc60c950-2fd6-44d1-a91b-8c872ee53a45",
                  "index": 2,
                  "name": "å­¦ç”Ÿçƒ­åŒº_2",
                  "hotAreaType": "student",
                  "interactionType": "audio",
                  "role": "classRep",
                  "aiSticker": ""
                },
                {
                  "id": "8d150955-f700-493f-84a7-6e70fc3ff088",
                  "index": 3,
                  "name": "å­¦ç”Ÿçƒ­åŒº_3",
                  "hotAreaType": "student",
                  "interactionType": "videoAudio",
                  "role": "classMonitor",
                  "aiSticker": "desertTheme"
                },
                {
                  "id": "f1badfc9-d4b3-4616-a230-de9aff154d2f",
                  "index": 4,
                  "name": "å­¦ç”Ÿçƒ­åŒº_4",
                  "hotAreaType": "student",
                  "interactionType": "videoAudio",
                  "role": "classMonitor",
                  "aiSticker": "desertTheme"
                },
                {
                  "id": "1a04f285-f4d2-44aa-80b8-2c8297387eca",
                  "index": 5,
                  "name": "å­¦ç”Ÿçƒ­åŒº_5",
                  "hotAreaType": "student",
                  "interactionType": "videoAudio",
                  "role": "classMonitor",
                  "aiSticker": "desertTheme"
                },
                {
                  "id": "5c0a1ccb-7268-4963-9ef1-b9e6f830c3b6",
                  "index": 6,
                  "name": "å­¦ç”Ÿçƒ­åŒº_6",
                  "hotAreaType": "student",
                  "interactionType": "videoAudio",
                  "role": "classMonitor",
                  "aiSticker": "desertTheme"
                }
              ]
            },
            "partName": "æˆ‘æ˜¯æ–°çš„ç¯èŠ‚",
            "stageHotArea": {
              "count": 2,
              "interactionCommand": "oneVsOne",
              "operationType": "Single",
              "location": [{
                  "id": "af71ce48-526f-42fd-b4e6-402d8a00f25d",
                  "index": 1,
                  "name": "ä¸Šå°çƒ­åŒº_1",
                  "hotAreaType": "stage",
                  "interactionType": "video",
                  "role": "classRep",
                  "aiSticker": "desertTheme"
                },
                {
                  "id": "0c69a51d-f865-436a-b563-3f8b530d9f77",
                  "index": 2,
                  "name": "ä¸Šå°çƒ­åŒº_2",
                  "hotAreaType": "stage",
                  "interactionType": "audio",
                  "role": "classMonitor",
                  "aiSticker": ""
                }
              ]
            },
            "skillHotArea": {
              "count": 2,
              "operationType": "Single",
              "location": [{
                  "id": "5af81b25-380c-4bf7-8bff-ddc1e5e992de",
                  "index": 1,
                  "name": "æŠ€èƒ½çƒ­åŒº_1",
                  "hotAreaType": "skill",
                  "role": "classRep",
                  "roleSkill": "openTreasureBox",
                  "skillMaterialId": "treasureBox",
                  "imageId": "treasureBox"
                },
                {
                  "id": "3e9ca6a6-058c-4890-b7ce-8db9a4fb226d",
                  "index": 2,
                  "name": "æŠ€èƒ½çƒ­åŒº_2",
                  "hotAreaType": "skill",
                  "role": "classMonitor",
                  "roleSkill": "openBlindBox",
                  "skillMaterialId": "themeBlindBox",
                  "imageId": "themeBlindBox"
                }
              ]
            },
            "partInteractionInfo": {
              "playRule": "takePhotoTogether",
              "voiceRecognition": {
                "isRoleCheck": 0,
                "role": "classAssistant",
                "keyword": "åŠ©æ•™"
              }
            }
          }
        }
      }, '*');


      // console.log('å‘é€æ¶ˆæ¯äº† tom')

    });

    // setTimeout(()=>{
    //   console.log('å‘é€æ¶ˆæ¯äº† tom',window.frames.child)
    //    iframe.contentWindow.postMessage('ç¬¬äºŒæ¬¡å‘é€')
    // },3000)
  </script>
</body>

</html>